generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator dbml {
  provider            = "prisma-dbml-generator"
  output              = "../../../dist"
  outputName          = "schema.dbml"
  projectName         = "Bookius Main Schema"
  projectDatabaseType = "PostgreSQL"
  projectNote         = "The database schema of the main bookius server"
}

/// This model will represent a user of the service.
model User {
  id        String       @id @default(cuid())
  // the cryptographic address issued by magic
  issuer    String       @unique
  createdAt DateTime     @default(now())
  profile   UserProfile?
}

/// This model will track profile information about the user
model UserProfile {
  id        String   @id @default(uuid()) @db.Uuid
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    String   @unique
  bio       String?
  age       Int?     @db.SmallInt
  username  String   @unique @db.Citext
  email     String   @unique @db.Citext
  updatedAt DateTime @updatedAt
  // the country as represented in the country service file
  countryId Int?
}
